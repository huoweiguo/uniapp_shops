{"version":3,"file":"uni-data-picker.js","sources":["uni_modules/uni-data-picker/components/uni-data-pickerview/uni-data-picker.js"],"sourcesContent":["export default {\n  props: {\n    localdata: {\n      type: [Array, Object],\n      default () {\n        return []\n      }\n    },\n    spaceInfo: {\n      type: Object,\n      default () {\n        return {}\n      }\n    },\n    collection: {\n      type: String,\n      default: ''\n    },\n    action: {\n      type: String,\n      default: ''\n    },\n    field: {\n      type: String,\n      default: ''\n    },\n    orderby: {\n      type: String,\n      default: ''\n    },\n    where: {\n      type: [String, Object],\n      default: ''\n    },\n    pageData: {\n      type: String,\n      default: 'add'\n    },\n    pageCurrent: {\n      type: Number,\n      default: 1\n    },\n    pageSize: {\n      type: Number,\n      default: 500\n    },\n    getcount: {\n      type: [Boolean, String],\n      default: false\n    },\n    getone: {\n      type: [Boolean, String],\n      default: false\n    },\n    gettree: {\n      type: [Boolean, String],\n      default: false\n    },\n    manual: {\n      type: Boolean,\n      default: false\n    },\n    value: {\n      type: [Array, String, Number],\n      default () {\n        return []\n      }\n    },\n    modelValue: {\n      type: [Array, String, Number],\n      default () {\n        return []\n      }\n    },\n    preload: {\n      type: Boolean,\n      default: false\n    },\n    stepSearh: {\n      type: Boolean,\n      default: true\n    },\n    selfField: {\n      type: String,\n      default: ''\n    },\n    parentField: {\n      type: String,\n      default: ''\n    },\n    multiple: {\n      type: Boolean,\n      default: false\n    },\n    map: {\n      type: Object,\n      default () {\n        return {\n          text: \"text\",\n          value: \"value\"\n        }\n      }\n    }\n  },\n  data() {\n    return {\n      loading: false,\n      errorMessage: '',\n      loadMore: {\n        contentdown: '',\n        contentrefresh: '',\n        contentnomore: ''\n      },\n      dataList: [],\n      selected: [],\n      selectedIndex: 0,\n      page: {\n        current: this.pageCurrent,\n        size: this.pageSize,\n        count: 0\n      }\n    }\n  },\n  computed: {\n    isLocalData() {\n      return !this.collection.length;\n    },\n    isCloudData() {\n      return this.collection.length > 0;\n    },\n    isCloudDataList() {\n      return (this.isCloudData && (!this.parentField && !this.selfField));\n    },\n    isCloudDataTree() {\n      return (this.isCloudData && this.parentField && this.selfField);\n    },\n    dataValue() {\n      let isModelValue = Array.isArray(this.modelValue) ? (this.modelValue.length > 0) : (this.modelValue !== null ||\n        this.modelValue !== undefined);\n      return isModelValue ? this.modelValue : this.value;\n    },\n    hasValue() {\n      if (typeof this.dataValue === 'number') {\n        return true\n      }\n      return (this.dataValue != null) && (this.dataValue.length > 0)\n    }\n  },\n  created() {\n    this.$watch(() => {\n      var al = [];\n      ['pageCurrent',\n        'pageSize',\n        'spaceInfo',\n        'value',\n        'modelValue',\n        'localdata',\n        'collection',\n        'action',\n        'field',\n        'orderby',\n        'where',\n        'getont',\n        'getcount',\n        'gettree'\n      ].forEach(key => {\n        al.push(this[key])\n      });\n      return al\n    }, (newValue, oldValue) => {\n      let needReset = false\n      for (let i = 2; i < newValue.length; i++) {\n        if (newValue[i] != oldValue[i]) {\n          needReset = true\n          break\n        }\n      }\n      if (newValue[0] != oldValue[0]) {\n        this.page.current = this.pageCurrent\n      }\n      this.page.size = this.pageSize\n\n      this.onPropsChange()\n    })\n    this._treeData = []\n  },\n  methods: {\n    onPropsChange() {\n      this._treeData = [];\n    },\n\n    // 填充 pickview 数据\n    async loadData() {\n      if (this.isLocalData) {\n        this.loadLocalData();\n      } else if (this.isCloudDataList) {\n        this.loadCloudDataList();\n      } else if (this.isCloudDataTree) {\n        this.loadCloudDataTree();\n      }\n    },\n\n    // 加载本地数据\n    async loadLocalData() {\n      this._treeData = [];\n      this._extractTree(this.localdata, this._treeData);\n\n      let inputValue = this.dataValue;\n      if (inputValue === undefined) {\n        return;\n      }\n\n      if (Array.isArray(inputValue)) {\n        inputValue = inputValue[inputValue.length - 1];\n        if (typeof inputValue === 'object' && inputValue[this.map.value]) {\n          inputValue = inputValue[this.map.value];\n        }\n      }\n\n      this.selected = this._findNodePath(inputValue, this.localdata);\n    },\n\n    // 加载 Cloud 数据 (单列)\n    async loadCloudDataList() {\n      if (this.loading) {\n        return;\n      }\n      this.loading = true;\n\n      try {\n        let response = await this.getCommand();\n        let responseData = response.result.data;\n\n        this._treeData = responseData;\n\n        this._updateBindData();\n        this._updateSelected();\n\n        this.onDataChange();\n      } catch (e) {\n        this.errorMessage = e;\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    // 加载 Cloud 数据 (树形)\n    async loadCloudDataTree() {\n      if (this.loading) {\n        return;\n      }\n      this.loading = true;\n\n      try {\n        let commandOptions = {\n          field: this._cloudDataPostField(),\n          where: this._cloudDataTreeWhere()\n        };\n        if (this.gettree) {\n          commandOptions.startwith = `${this.selfField}=='${this.dataValue}'`;\n        }\n\n        let response = await this.getCommand(commandOptions);\n        let responseData = response.result.data;\n\n        this._treeData = responseData;\n        this._updateBindData();\n        this._updateSelected();\n\n        this.onDataChange();\n      } catch (e) {\n        this.errorMessage = e;\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    // 加载 Cloud 数据 (节点)\n    async loadCloudDataNode(callback) {\n      if (this.loading) {\n        return;\n      }\n      this.loading = true;\n\n      try {\n        let commandOptions = {\n          field: this._cloudDataPostField(),\n          where: this._cloudDataNodeWhere()\n        };\n\n        let response = await this.getCommand(commandOptions);\n        let responseData = response.result.data;\n\n        callback(responseData);\n      } catch (e) {\n        this.errorMessage = e;\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    // 回显 Cloud 数据\n    getCloudDataValue() {\n      if (this.isCloudDataList) {\n        return this.getCloudDataListValue();\n      }\n\n      if (this.isCloudDataTree) {\n        return this.getCloudDataTreeValue();\n      }\n    },\n\n    // 回显 Cloud 数据 (单列)\n    getCloudDataListValue() {\n      // 根据 field's as value标识匹配 where 条件\n      let where = [];\n      let whereField = this._getForeignKeyByField();\n      if (whereField) {\n        where.push(`${whereField} == '${this.dataValue}'`)\n      }\n\n      where = where.join(' || ');\n\n      if (this.where) {\n        where = `(${this.where}) && (${where})`\n      }\n\n      return this.getCommand({\n        field: this._cloudDataPostField(),\n        where\n      }).then((res) => {\n        this.selected = res.result.data;\n        return res.result.data;\n      });\n    },\n\n    // 回显 Cloud 数据 (树形)\n    getCloudDataTreeValue() {\n      return this.getCommand({\n        field: this._cloudDataPostField(),\n        getTreePath: {\n          startWith: `${this.selfField}=='${this.dataValue}'`\n        }\n      }).then((res) => {\n        let treePath = [];\n        this._extractTreePath(res.result.data, treePath);\n        this.selected = treePath;\n        return treePath;\n      });\n    },\n\n    getCommand(options = {}) {\n      /* eslint-disable no-undef */\n      let db = uniCloud.database(this.spaceInfo)\n\n      const action = options.action || this.action\n      if (action) {\n        db = db.action(action)\n      }\n\n      const collection = options.collection || this.collection\n      db = db.collection(collection)\n\n      const where = options.where || this.where\n      if (!(!where || !Object.keys(where).length)) {\n        db = db.where(where)\n      }\n\n      const field = options.field || this.field\n      if (field) {\n        db = db.field(field)\n      }\n\n      const orderby = options.orderby || this.orderby\n      if (orderby) {\n        db = db.orderBy(orderby)\n      }\n\n      const current = options.pageCurrent !== undefined ? options.pageCurrent : this.page.current\n      const size = options.pageSize !== undefined ? options.pageSize : this.page.size\n      const getCount = options.getcount !== undefined ? options.getcount : this.getcount\n      const getTree = options.gettree !== undefined ? options.gettree : this.gettree\n\n      const getOptions = {\n        getCount,\n        getTree\n      }\n      if (options.getTreePath) {\n        getOptions.getTreePath = options.getTreePath\n      }\n\n      db = db.skip(size * (current - 1)).limit(size).get(getOptions)\n\n      return db\n    },\n\n    _cloudDataPostField() {\n      let fields = [this.field];\n      if (this.parentField) {\n        fields.push(`${this.parentField} as parent_value`);\n      }\n      return fields.join(',');\n    },\n\n    _cloudDataTreeWhere() {\n      let result = []\n      let selected = this.selected\n      let parentField = this.parentField\n      if (parentField) {\n        result.push(`${parentField} == null || ${parentField} == \"\"`)\n      }\n      if (selected.length) {\n        for (var i = 0; i < selected.length - 1; i++) {\n          result.push(`${parentField} == '${selected[i].value}'`)\n        }\n      }\n\n      let where = []\n      if (this.where) {\n        where.push(`(${this.where})`)\n      }\n\n      if (result.length) {\n        where.push(`(${result.join(' || ')})`)\n      }\n\n      return where.join(' && ')\n    },\n\n    _cloudDataNodeWhere() {\n      let where = []\n      let selected = this.selected;\n      if (selected.length) {\n        where.push(`${this.parentField} == '${selected[selected.length - 1].value}'`);\n      }\n\n      where = where.join(' || ');\n\n      if (this.where) {\n        return `(${this.where}) && (${where})`\n      }\n\n      return where\n    },\n\n    _getWhereByForeignKey() {\n      let result = []\n      let whereField = this._getForeignKeyByField();\n      if (whereField) {\n        result.push(`${whereField} == '${this.dataValue}'`)\n      }\n\n      if (this.where) {\n        return `(${this.where}) && (${result.join(' || ')})`\n      }\n\n      return result.join(' || ')\n    },\n\n    _getForeignKeyByField() {\n      let fields = this.field.split(',');\n      let whereField = null;\n      for (let i = 0; i < fields.length; i++) {\n        const items = fields[i].split('as');\n        if (items.length < 2) {\n          continue;\n        }\n        if (items[1].trim() === 'value') {\n          whereField = items[0].trim();\n          break;\n        }\n      }\n      return whereField;\n    },\n\n    _updateBindData(node) {\n      const {\n        dataList,\n        hasNodes\n      } = this._filterData(this._treeData, this.selected)\n\n      let isleaf = this._stepSearh === false && !hasNodes\n\n      if (node) {\n        node.isleaf = isleaf\n      }\n\n      this.dataList = dataList\n      this.selectedIndex = dataList.length - 1\n\n      if (!isleaf && this.selected.length < dataList.length) {\n        this.selected.push({\n          value: null,\n          text: \"请选择\"\n        })\n      }\n\n      return {\n        isleaf,\n        hasNodes\n      }\n    },\n\n    _updateSelected() {\n      let dl = this.dataList\n      let sl = this.selected\n      let textField = this.map.text\n      let valueField = this.map.value\n      for (let i = 0; i < sl.length; i++) {\n        let value = sl[i].value\n        let dl2 = dl[i]\n        for (let j = 0; j < dl2.length; j++) {\n          let item2 = dl2[j]\n          if (item2[valueField] === value) {\n            sl[i].text = item2[textField]\n            break\n          }\n        }\n      }\n    },\n\n    _filterData(data, paths) {\n      let dataList = []\n      let hasNodes = true\n\n      dataList.push(data.filter((item) => {\n        return (item.parent_value === null || item.parent_value === undefined || item.parent_value === '')\n      }))\n      for (let i = 0; i < paths.length; i++) {\n        let value = paths[i].value\n        let nodes = data.filter((item) => {\n          return item.parent_value === value\n        })\n\n        if (nodes.length) {\n          dataList.push(nodes)\n        } else {\n          hasNodes = false\n        }\n      }\n\n      return {\n        dataList,\n        hasNodes\n      }\n    },\n\n    _extractTree(nodes, result, parent_value) {\n      let list = result || []\n      let valueField = this.map.value\n      for (let i = 0; i < nodes.length; i++) {\n        let node = nodes[i]\n\n        let child = {}\n        for (let key in node) {\n          if (key !== 'children') {\n            child[key] = node[key]\n          }\n        }\n        if (parent_value !== null && parent_value !== undefined && parent_value !== '') {\n          child.parent_value = parent_value\n        }\n        result.push(child)\n\n        let children = node.children\n        if (children) {\n          this._extractTree(children, result, node[valueField])\n        }\n      }\n    },\n\n    _extractTreePath(nodes, result) {\n      let list = result || []\n      for (let i = 0; i < nodes.length; i++) {\n        let node = nodes[i]\n\n        let child = {}\n        for (let key in node) {\n          if (key !== 'children') {\n            child[key] = node[key]\n          }\n        }\n        result.push(child)\n\n        let children = node.children\n        if (children) {\n          this._extractTreePath(children, result)\n        }\n      }\n    },\n\n    _findNodePath(key, nodes, path = []) {\n      let textField = this.map.text\n      let valueField = this.map.value\n      for (let i = 0; i < nodes.length; i++) {\n        let node = nodes[i]\n        let children = node.children\n        let text = node[textField]\n        let value = node[valueField]\n\n        path.push({\n          value,\n          text\n        })\n\n        if (value === key) {\n          return path\n        }\n\n        if (children) {\n          const p = this._findNodePath(key, children, path)\n          if (p.length) {\n            return p\n          }\n        }\n\n        path.pop()\n      }\n      return []\n    }\n  }\n}\n"],"names":["uniCloud"],"mappings":"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"}